class DailyWord::CLI

    def call
        greeting
        words
        word_of_day
        cal_menu_msg
        cal_menu 
        user_input = gets.strip.downcase
        if user_input == "exit"
            puts "-----------------------------------------------------------------------------------------------------------------------"
            puts "\nSee you tomorrow!\n\n"
            puts "-----------------------------------------------------------------------------------------------------------------------"
        end
    end 

    def cal_menu_msg
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
        puts "\nTo see the Daily Words calendar enter 'cal'\n\n"
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
    end


    def cal_menu
        user_input = gets.strip.downcase
        if user_input == "exit"
            puts "-----------------------------------------------------------------------------------------------------------------------"
            puts "\nSee you tomorrow!\n\n"
            puts "-----------------------------------------------------------------------------------------------------------------------"
        elsif
            user_input == "cal"
            months
            wod_msg
            choose_month_msg
            choose_month
        else
            puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
            puts "\nWoah! That was weird... Please try again.\n\n"
            puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
        end
    end 

    def choose_month_msg
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
        puts "\nChoose a number from the list to view the words for that month.\n"
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
    end 

    def choose_month
        user_input = nil
        user_input = gets.strip.downcase
        case 
            when user_input == "6" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for January 2019:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
                    
            when user_input == "5" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for February 2019:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
                    
            when user_input == "4" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for March 2019:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
                    
            when user_input == "3" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for April 2019:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
   
            when user_input == "2" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for May 2019:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input) 

            when user_input == "1" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for June 2019:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)

            when user_input == "13"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for June 2019:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)

            when user_input == "12"
                puts "-----------------------------------------------------------------------------------------------------------------------" 
                puts "\nDailyWords for July 2018:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
                    
            when user_input == "11" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for August 2018:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
                    
            when user_input == "10" 
                puts "\nDailyWords for September 2018:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
                    
            when user_input == "9" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for October 2018:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
                    
            when user_input == "8" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for November 2018:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
                    
            when user_input == "7" 
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nDailyWords for December 2018:\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                words_of_month(user_input)
            when user_input == "exit"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nSee you tomorrow!\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                
            else
                puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
                puts "\nWoah! That was weird... Please try again\n"
                puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
        end
        choose_word(user_input)
        choose_month_msg
    end 

    def greeting
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
        puts "\nWelcome to Daily Word!\n"
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
    end
    
    def wod_msg
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
        puts "\nTo view the word of the day type 'wod'."
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
    end

    def word_of_day
        DailyWord::Scraper.wod
    end

    def words
        DailyWord::Scraper.get_words
    end

    def months 
        DailyWord::Word.list_months
    end

    def more_words_msg
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
        puts "\nWould you like to see more DailyWords 'yes/no'?"
        puts "To start over enter 'menu'"
        puts "When done enter 'exit' to end DailyWords.\n"
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
    end

    def more_words_menu
        user_input = gets.strip.downcase
        case user_input
            when "yes"
                cal_menu_msg
                cal_menu
            when "menu"
                call
            when "no"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nSee you tomorrow!\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
            when "exit"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nSee you tomorrow!\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                
            else
                puts "-----------------------------------------------------------------------------------------------------------------------"
                puts "\nWoah! That was weird... Please try again.\n"
                puts "-----------------------------------------------------------------------------------------------------------------------"
                more_words_menu
        end
    end

    def choose_word_msg
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
        puts "\nChoose a number to see the words' details.\n"
        puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
    end

    def Choose_word(selected_word)
        range = (1..@list.length).to_a
        selected_word = gets.strip
        if selected_word != "exit"
            selected_word = selected_word.to_i
                if !range.include?(selected_word)
                    puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
                    puts "\nHmm... Try entering a number between #{range[0]} and #{range[-1]}.\n\n"
                    puts "<><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><>"
                    which_one(selected_word)
                else
                    show_details(selected_word)
                end
        else
            puts "-----------------------------------------------------------------------------------------------------------------------"
            puts "\nSee you tomorrow!\n"
            puts "-----------------------------------------------------------------------------------------------------------------------"
            return
        end
        more_words_msg
        more_words_menu     
    end

    def show_details(input)
        word_obj = @matches[input.to_i-1]
        DailyWord::Scraper.get_missing_data(word_obj) 
        DailyWord::Word.display_data(word_obj)
    end

    def words_of_month(input)
        month = DailyWord::Word.get_months[input.to_i-1].strftime("%B-%Y")
        @matches = DailyWord::Word.all.select{|d|d.date.strftime("%B-%Y") == month}
        @list = @matches.each_with_index do |w, i|
            puts "#{i+1} #{w.name}, #{w.date.strftime('%B-%Y')}" 
        end
    end
end